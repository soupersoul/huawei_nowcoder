import traceback
import numpy as np

def ascMax(arr):
    le = len(arr)
    maxlen = [1] * le
    for i in range(le):
        for j in range(i):
            if arr[i] > arr[j]:
                maxlen[i] = max(maxlen[i], maxlen[j] + 1)
    return np.array(maxlen)

def descMax(arr):
    le = len(arr)
    maxlen = [1] * le
    for i in range(le-1, -1, -1):
        for j in range(le-1, i, -1):
            if arr[i] > arr[j]:
                maxlen[i] = max(maxlen[i], maxlen[j] + 1)
    return np.array(maxlen)

while True:
    try:
        i = "1944 3215 1503 3925 527 81 781 251 2710 3627 1249 287 3950 1685 2585 28 1323 3420 780 112 2360 2606 3010 386 914 649 1167 989 652 3932 947 1370 1421 1886 790 2503 1772 721 3884 2686 3726 1088 2005 3406 2581 2294 1972 2772 1547 1083 894 2676 1873 1299 1173 2475 543 3623 1563 3468 3185 1959 2390 207 145 1677 225 2066 3962 1995 478 553 1047 3190 3404 1054 3019 3198 3361 1119 3219 2431 3774 2707 3844 3567 1759 2254 341 3229 241 2054 2467 925 2596 2590 2574 962 715 3397 3682 3881 1151 3139 3931 2639 691 1549 639 68 2808 1903 356 3186 3639 760 1352 837 2575 3748 2459 619 781 316 540 1720 2900 2326 1763 94 1014 2472 3106 3880 90 2347 2054 3701 613 1722 2561 99 1780 1318 2693 1230 3922 918 654 589 3115 126 3696 804 2056 2219 852 1258 1118 2462 2447 277 316 1068 1892 2974 2800 987 1090 1227 3773 1541 2242 1252 2443 456 2632 510 3554 2312 958 3533 681 2418 819 3145 2004 2449 3070 1250 1893 3009 2330 2059 3113 765 1320 3642 829 999 2419 996 2811 1820 1088 1542 2327 3591 3074 3348 3135 2110 1846 134 2787 1463 1174 2571 2960 724 3297 1659 3107 802 3124 3177 1822 81 873 1920 1979 509 1928 3407 2042 3478 1263 1462 1270 224 2898 414 958 3555 3907 1493 322 35 962 3515 1775 1366 2104 2060 3543 2245 3469 2900 1719 2745 1103 2213 90 2518 1166 3490 1251 1248 1066 1824 3413 1752 1845 1542 750 2692 2820 2574 1401 3933 3718 1730 3036 3492 2951 2303 2859 3678 561 1845 2830 706 3167 2196 796 3405 691 3005 443 2885 909 2266 1520 1487 392 2195 1684 120 612 1506 817 3076 1505 1405 2685 22 423 3383 1979 583 1270 187 3718 3458 3026 1844 3012 377 3569 1434 3917 1483 655 1299 1686 3750 1229 2999 3113 161 3410 3694 482 720 2656 1630 1353 3487 1839 2997 891 3554 1372 1298 2751 3229 3284 2324 3301 1321 1182 1556 2859 1801 2796 11 720 2830 1555 573 3389 3038 1367 1709 3159 3871 3518 3787 113 1050 1746 2473 138 2576 3163 3728 682 133 3667 2247 96 1188 3416 1570 3960 2933 2087 3203 3756 3688 224 3483 3698 2620 2691 447 3468 3141 2662 3367 431 3601 212 1586 1227 2744 3673 3501 3880 3634 2961 3434 930 352 1442 1476 1904 2798 1687 3607 2618 2094 2549 1236 3823 865 3662 215 554 1930 3956 2101 2343 2438 2888 2104 3477 1950 3654 2447 559 3679 1428 786 942 419 2306 3372 3496 2772 3186 3105 1619 964 1569 3503 2211 1759 2824 105 3767 54 1172 2307 48 1714 3157 3783 2787 419 1752 2144 1035 3274 913 1702 2873 2293 3630 1029 971 914 3510 3054 3267 2558 188 3010 3280 244 3619 2176 2256 2708 1812 1020 3005 685 1763 3828 645 978 2607 2830 961 977 3961 1016 3758 1693 1550 3290 941 4 2325 1900 3782 1390 168 3561 2677 2872 748 3698 63 1637 2749 2653 3482 2002 3537 1819 2870 3378 2703 694 2825 16 1237 654 1879 3473 2269 684 226 1707 590 2221 1128 3161 2006 1530 2841 3848 571 2694 3128 3209 1403 2376 750 2085 151 880 2463 2034 3667 1329 3481 2231 1809 1285 2747 1772 1022 2129 2971 765 1751 860 2824 1035 145 2200 1905 3667 2935 1567 3451 3683 263 580 3226 1290 3502 2785 3795 2086 2505 2296 3775 2741 130 1708 1125 1553 3793 1493 2076 1723 1056 461 3128 3246 387 3467 2941 2493 849 3212 1895 2488 1991 1369 2301 128 2468 1630 3742 2969 231 1271 1403 1636 2537 119 3910 1008 2888 572 3194 1582 1132 2396 1711 3040 1057 218 3959 3880 24 897 3183 495 3049 2205 1663 1402 1498 2097 2023 194 3520 2767 3577 1622 1764 2490 2158 34 1666 3887 1954 1120 2189 2728 3435 455 629 3496 1781 1815 3883 1776 3844 2366 1775 3362 1787 1986 2200 1659 3293 3518 3166 2765 108 449 390 1412 1089 1792 3956 3843 131 3691 1316 160 1882 3185 3824 3701 66 938 459 602 3018 2163 2041 2508 3769 2026 1320 3431 3309 1649 307 3061 567 3022 191 3826 937 31 271 3635 400 98 2910 2853 2587 2755 75 2199 987 2970 2498 2178 1283 1208 3782 1239 3053 788 611 616 3880 1369 1824 2404 2571 1401 2703 2833 1962 753 3812 1806 996 2243 1029 2629 410 3867 1685 799 3394 3607 3520 1898 1864 642 2124 1323 1846 2253 634 1451 415 1127 3273 3264 3242 1621 265 246 2018 2067 1387 339 3834 2587 2276 2240 626 695 282 231 2608 3059 327 418 3336 2699 1530 9 1970 1158 204 1277 1562 15 3743 3130 2829 572 2643 3042 1181 2705 2309 2289 939 1831 2380 1910 2915 2168 2538 3946 16 3269 1592 1949 744 3903 1936 3945 3605 1881 2562 2915 1126 1071 1685 1742 3537 668 2160 1172 3230 530 1048 557 3701 2667 1404 13 3007 2726 3427 2156 290 2403 3078 1470 1917 438 3846 3793 1505 2807 2396 436 2126 3699 2618 3177 349 378 652 2463 2097 1295 3624 3418 1072 2761 3431 2927 1809 1353 2638 1435 1017 632 3945 1488 3553 2884 652 2881 1432 2384 1695 2603 620 3058 2019 3800 1880 3174 2506 1940 675 2729 1897 1398 3723 3405 2109 2360 3430 3320 1246 3469 1550 455 747 906 3357 234 104 3332 1721 3625 1778 3522 1202 2206 3666 912 125 2991 3323 103 1104 1723 2838 2002 3305 592 2468 831 1574 751 1780 747 3184 3555 903 2489 414 49 3694 875 1436 875 2258 2328 1377 585 743 3782 1611 2298 3195 2032 2779 1875 1556 2103 1903 2054 3016 401 651 1441 1498 1625 1091 2585 1139 1348 2963 337 2760 3204 613 2199 2752 459 2093 411 3448 2074 1678 1974 3065 2403 1518 80 3260 1751 716 3421 3800 3414 2270 2185 2737 252 1614 2379 1878 3190 2686 2812 2418 1769 1405 62 3906 432 2669 1733 434 1051 2782 1502 2703 3274 457 515 1812 1017 813 1891 2818 2234 1594 1560 1845 1828 374 2929 1641 2138 2332 1961 3720 3290 562 3369 805 3234 2732 1786 3490 795 317 3881 1448 1789 2096 1278 2440 2454 1823 2167 2240 788 3469 2858 3370 1892 2931 2556 3486 3951 906 910 122 3134 739 1347 1948 3957 2672 3266 2229 3748 2810 870 1505 1185 2951 2043 3198 1692 211 745 2054 1778 988 1615 892 3765 446 623 3104 3790 216 2719 1647 3736 2363 3631 1259 3652 431 984 47 179 776 2153 3108 3823 1627 784 3622 1681 2487 1208 710 3487 2149 102 2114 1034 3946 1496 3626 1492 1326 3867 712 1630 3483 2215 3620 356 2047 2537 2011 2478 1373 1665 922 535 2468 2578 2934 3261 2928 3185 3874 3100 3912 318 3804 3916 2707 2024 3659 1512 2512 1825 1639 3007 665 3703 1147 2368 2582 2344 2259 3714 1144 1410 1656 471 714 2368 1611 2323 3373 2281 1331 1921 1880 3847 1561 2044 387 2037 157 2623 279 2765 249 399 3272 784 813 3175 75 1062 2538 3341 2828 390 825 3160 683 2937 3726 3297 2969 603 3208 3953 1432 2296 2158 1899 1478 751 2831 3651 1456 560 2840 0 3511 1290 1050 476 1129 3008 2700 897 3640 3262 3953 1278 1400 671 3439 1427 742 712 1107 1643 1320 3819 168 1073 3119 3164 2006 780 2870 2780 1902 86 408 3189 2999 1091 3583 3731 1602 1689 496 613 2609 2681 3958 1414 3140 842 290 2587 1236 2483 2251 306 905 1264 760 1329 3291 2798 2005 3402 1211 1513 513 1665 914 1009 754 1442 2732 2537 2735 992 1486 3826 3877 3046 2638 2546 2431 3357 3397 1089 1833 2289 3031 1765 1089 2698 1976 1949 2222 3222 2775 219 3688 2747 966 1093 1513 2832 2859 3302 853 794 2476 281 226 3027 857 640 1502 2369 1043 3899 2117 3268 2959 3574 327 2878 1045 2090 408 1129 397 1740 8 218 3953 1216 272 1638 80 2708 133 2856 2552 1658 1381 1725 3447 706 2975 847 3609 3664 3915 717 3656 1739 1650 1113 739 907 1002 3160 1126 2565 473 5 3468 3580 1708 2259 2438 1668 2481 824 2962 1467 2846 329 1472 993 1721 3841 2348 2711 2205 1131 1424 2787 3152 319 1745 2338 2291 1134 1412 694 1928 2475 1527 1306 1511 800 2662 268 404 3649 3739 323 130 1007 3706 1542 3297 1381 3872 1478 3163 685 3485 2562 186 3503 3670 1964 3959 3237 177 2564 3830 945 2357 2223 1408 2884 658 3871 2701 957 1694 3093 1697 1294 2945 54 932"
        arr = list(map(int, i.split(" ")))
        pos = ascMax(arr)
        rev = descMax(arr)
        print(max(pos + rev) - 1)
        break
    except Exception as e:
        print(e)
        break